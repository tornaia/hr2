CREATE TABLE SZEMELYITORZS
  (
    TSZ           							INT NOT NULL PRIMARY KEY,
    VEZETEKNEV 								VARCHAR(255),
    KERESZTNEV	  							VARCHAR(255),
    NEM 		  							VARCHAR(30),
    ALLOMANYMOD	  							VARCHAR(30) NOT NULL,
    ALLAMPOLGARSAG	 						INT,
    SZULETESI_EV							INT DEFAULT -1,
    SZULETESI_HO							INT DEFAULT -1,
    SZULETESI_NAP							INT DEFAULT -1,
    SZULETESI_HELY	 						VARCHAR(255),
    SZULETESI_ORSZAG 						VARCHAR(255),
    SZULETESI_NEV	 						VARCHAR(255),
    SZULETESI_NEV_ANYJA						VARCHAR(255),
    ADOAZONOSITO_JEL						VARCHAR(255),
    TAJ										VARCHAR(255),
    SZEMELYI_IGAZOLVANY_SZAM				VARCHAR(255),
    SZEMELYI_IGAZOLVANY_SZAM_LEJARAT_EV		INT DEFAULT -1,
    SZEMELYI_IGAZOLVANY_SZAM_LEJARAT_HO		INT DEFAULT -1,
    SZEMELYI_IGAZOLVANY_SZAM_LEJARAT_NAP	INT DEFAULT -1,
    UTLEVEL_SZAM							VARCHAR(255),
    UTLEVEL_SZAM_LEJARAT_EV					INT DEFAULT -1,
    UTLEVEL_SZAM_LEJARAT_HO					INT DEFAULT -1,
    UTLEVEL_SZAM_LEJARAT_NAP				INT DEFAULT -1,
    JOGOSITVANY_SZAM						VARCHAR(255),
    JOGOSITVANY_SZAM_LEJARAT_EV				INT DEFAULT -1,
    JOGOSITVANY_SZAM_LEJARAT_HO				INT DEFAULT -1,
    JOGOSITVANY_SZAM_LEJARAT_NAP			INT DEFAULT -1,
    TELEFON									VARCHAR(255),
    MOBIL									VARCHAR(255),
    EMAIL									VARCHAR(255),
    LAKCIM_AKTUALIS							VARCHAR(30),
    LAKCIM_ALLANDO_IRANYITOSZAM				VARCHAR(255),
    LAKCIM_ALLANDO_TELEPULES				VARCHAR(255),
    LAKCIM_ALLANDO_KERULET					VARCHAR(255),
    LAKCIM_ALLANDO_KOZTERULET_NEV			VARCHAR(255),
    LAKCIM_ALLANDO_KOZTERULET_TIPUS			VARCHAR(30),
    LAKCIM_ALLANDO_KOZTERULET_SZAM			VARCHAR(255),
    LAKCIM_ALLANDO_EPULET					VARCHAR(255),
    LAKCIM_ALLANDO_LEPCSOHAZ				VARCHAR(255),
    LAKCIM_ALLANDO_EMELET					VARCHAR(255),
    LAKCIM_ALLANDO_AJTO						VARCHAR(255),
    LAKCIM_IDEIGLENES_IRANYITOSZAM			VARCHAR(255),
    LAKCIM_IDEIGLENES_TELEPULES				VARCHAR(255),
    LAKCIM_IDEIGLENES_KERULET				VARCHAR(255),
    LAKCIM_IDEIGLENES_KOZTERULET_NEV		VARCHAR(255),
    LAKCIM_IDEIGLENES_KOZTERULET_TIPUS		VARCHAR(30),
    LAKCIM_IDEIGLENES_KOZTERULET_SZAM		VARCHAR(255),
    LAKCIM_IDEIGLENES_EPULET				VARCHAR(255),
    LAKCIM_IDEIGLENES_LEPCSOHAZ				VARCHAR(255),
    LAKCIM_IDEIGLENES_EMELET				VARCHAR(255),
    LAKCIM_IDEIGLENES_AJTO					VARCHAR(255),
    SZERVEZETI_EGYSEG	 					INT,
    MUNKAKOR_JELLEGE						VARCHAR(30),
    KOLTSEGHELY	 							INT,
    FOGLALKOZASI_VISZONY	 				INT,
    FOGLALKOZTATAS_JELLEGE	 				INT,
    FEOR	 								INT,
    MUNKAKOR	 							INT,
    UZEMANYAG_ELSZAMOLAS					BOOLEAN NOT NULL,
    MUNKAIDO_NAPI							DECIMAL(4,2),
    MUNKAIDO_HETI							DECIMAL(5,2),
    JOGVISZONY_KEZDETE_EV					INT DEFAULT -1,
    JOGVISZONY_KEZDETE_HO					INT DEFAULT -1,
    JOGVISZONY_KEZDETE_NAP					INT DEFAULT -1,
    JOGVISZONY_VEGE_EV						INT DEFAULT -1,
    JOGVISZONY_VEGE_HO						INT DEFAULT -1,
    JOGVISZONY_VEGE_NAP						INT DEFAULT -1,
    JOGVISZONY_MEGSZUNESENEK_MODJA			VARCHAR(30),
    PROBAIDO_VEGE_EV						INT DEFAULT -1,
    PROBAIDO_VEGE_HO						INT DEFAULT -1,
    PROBAIDO_VEGE_NAP						INT DEFAULT -1,
    MUNKASZERZODES_LEJAR_EV					INT DEFAULT -1,
    MUNKASZERZODES_LEJAR_HO					INT DEFAULT -1,
    MUNKASZERZODES_LEJAR_NAP				INT DEFAULT -1,
    CSALADI_ALLAPOT							VARCHAR(30),
    GYAKORISAG								INT NOT NULL DEFAULT 12,
    UTOLSO_ORVOSI_VIZSGALAT_IDOPONTJA_EV	INT DEFAULT -1,
    UTOLSO_ORVOSI_VIZSGALAT_IDOPONTJA_HO	INT DEFAULT -1,
    UTOLSO_ORVOSI_VIZSGALAT_IDOPONTJA_NAP	INT DEFAULT -1,
    MEGVALTOTT_SZABADSAG					INT NOT NULL DEFAULT 0
  )
/

ALTER TABLE FELHASZNALO ADD FOREIGN KEY (SZEMELYITORZS) REFERENCES SZEMELYITORZS(TSZ)
/

ALTER TABLE SZEMELYITORZS ADD FOREIGN KEY (ALLAMPOLGARSAG) REFERENCES ERTEKKESZLET_ELEM(ID)
/

ALTER TABLE SZEMELYITORZS ADD FOREIGN KEY (SZERVEZETI_EGYSEG) REFERENCES ERTEKKESZLET_ELEM(ID)
/

ALTER TABLE SZEMELYITORZS ADD FOREIGN KEY (KOLTSEGHELY) REFERENCES ERTEKKESZLET_ELEM(ID)
/

ALTER TABLE SZEMELYITORZS ADD FOREIGN KEY (FOGLALKOZASI_VISZONY) REFERENCES ERTEKKESZLET_ELEM(ID)
/

ALTER TABLE SZEMELYITORZS ADD FOREIGN KEY (FOGLALKOZTATAS_JELLEGE) REFERENCES ERTEKKESZLET_ELEM(ID)
/

ALTER TABLE SZEMELYITORZS ADD FOREIGN KEY (FEOR) REFERENCES ERTEKKESZLET_ELEM(ID)
/

ALTER TABLE SZEMELYITORZS ADD FOREIGN KEY (MUNKAKOR) REFERENCES ERTEKKESZLET_ELEM(ID)
/

-- teszt miatt. ugyfelnel ugyis lefutott mar ez a script es kitorolte ezt
INSERT INTO SZEMELYITORZS(
	TSZ,
	VEZETEKNEV,
	KERESZTNEV,
	NEM,
	ALLOMANYMOD,
	ALLAMPOLGARSAG,
	SZULETESI_EV,
	SZULETESI_HO,
	SZULETESI_NAP,
	SZULETESI_HELY,
	SZULETESI_ORSZAG,
	SZULETESI_NEV,
	SZULETESI_NEV_ANYJA, 
	ADOAZONOSITO_JEL,
	TAJ,
	SZEMELYI_IGAZOLVANY_SZAM,
	SZEMELYI_IGAZOLVANY_SZAM_LEJARAT_EV,
	SZEMELYI_IGAZOLVANY_SZAM_LEJARAT_HO,
	SZEMELYI_IGAZOLVANY_SZAM_LEJARAT_NAP,
	UTLEVEL_SZAM,
	UTLEVEL_SZAM_LEJARAT_EV,
	UTLEVEL_SZAM_LEJARAT_HO,
	UTLEVEL_SZAM_LEJARAT_NAP,
	JOGOSITVANY_SZAM,
	JOGOSITVANY_SZAM_LEJARAT_EV,
	JOGOSITVANY_SZAM_LEJARAT_HO,
	JOGOSITVANY_SZAM_LEJARAT_NAP,
	SZERVEZETI_EGYSEG,
    MUNKAKOR_JELLEGE,
    KOLTSEGHELY,
    FOGLALKOZASI_VISZONY,
    FOGLALKOZTATAS_JELLEGE,
    FEOR,
    MUNKAKOR,
    UZEMANYAG_ELSZAMOLAS,
    MUNKAIDO_NAPI,
    MUNKAIDO_HETI,
    JOGVISZONY_KEZDETE_EV,
    JOGVISZONY_KEZDETE_HO,
    JOGVISZONY_KEZDETE_NAP,
    JOGVISZONY_VEGE_EV,
    JOGVISZONY_VEGE_HO,
    JOGVISZONY_VEGE_NAP,
    JOGVISZONY_MEGSZUNESENEK_MODJA,
    PROBAIDO_VEGE_EV,
    PROBAIDO_VEGE_HO,
    PROBAIDO_VEGE_NAP,
    MUNKASZERZODES_LEJAR_EV,
    MUNKASZERZODES_LEJAR_HO,
    MUNKASZERZODES_LEJAR_NAP
)
VALUES(
	9999,
	'Idősebb Nagyguci',
	'Imre',
	'FERFI',
	'AKTIV',
	(SELECT ID FROM ERTEKKESZLET_ELEM WHERE TIPUS = 'ALLAMPOLGARSAG' AND MEGNEVEZES_MAGYAR = 'Magyar'),
	1921,
	1,
	1,
	'Mucsaröcsöge',
	'Magyarország',
	'Születési név1',
	'Anyja születési neve1',
	'adójel1',
	'taj1',
	'személyiszám1',
	2012,
	12,
	31,
	'útlevélszám1',
	2015,
	4,
	15,
	'jogosítványszám1',
	2018,
	1,
	21,
	(SELECT ID FROM ERTEKKESZLET_ELEM WHERE TIPUS = 'SZERVEZETI_EGYSEG' AND MEGNEVEZES_MAGYAR = 'Adminisztráció - Biatorbágy'),
	'SZELLEMI',
	(SELECT ID FROM ERTEKKESZLET_ELEM WHERE TIPUS = 'KOLTSEGHELY' AND MEGNEVEZES_MAGYAR = 'HR - Munkaügy'),
	(SELECT ID FROM ERTEKKESZLET_ELEM WHERE TIPUS = 'FOGLALKOZASI_VISZONY' AND MEGNEVEZES_MAGYAR = 'Alkalmazásban álló'),
	(SELECT ID FROM ERTEKKESZLET_ELEM WHERE TIPUS = 'FOGLALKOZTATAS_JELLEGE' AND MEGNEVEZES_MAGYAR = 'Teljes munkaidőben foglalkoztatva'),
	(SELECT ID FROM ERTEKKESZLET_ELEM WHERE TIPUS = 'FEOR' AND MEGNEVEZES_MAGYAR = 'Humánpolitikai adminisztrátor'),
	(SELECT ID FROM ERTEKKESZLET_ELEM WHERE TIPUS = 'MUNKAKOR' AND MEGNEVEZES_MAGYAR = 'Személyi'),
	TRUE,
	11.50,
	55.50,
	2008,
	11,
	9,
	2018,
	10,
	22,
	'FELMONDAS',
	-1,
	-1,
	-1,
	-1,
	-1,
	-1
)
/